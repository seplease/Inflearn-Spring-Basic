6.4 스프링의 프록시 팩토리 빈
=
## 6.4.1 ProxyFactoryBean
- 프록시 오브젝트를 생성해주는 기술을 추상화한 팩토리 빈
- 순수하게 프록시를 생성하는 작업만을 담당하고, 프록시를 통해 제공할 부가기능은 별도의 빈에 둠
  - 기존의 팩토리 빈은 InvocationHandler가 부가기능 제공을 담당했으며, InvocationHandler는 타깃 정보가 필요해 팩토리 빈에 의존적으로 생성됨
- 부가기능은 MethodInterceptor 인터페이스를 구현해서 만든다.
  - InvocationHandler의 invoke() 메소드와 달리, MethodInterceptor의 invoke() 메소드는 ProxyFactoryBean으로부터 타깃 오브젝트에 대한 정보를 받음
  - 이로 인해 타깃 오브젝트와 독립적으로 생성될 수 있으며, 여러 프록시에서 재사용 가능
  - 또한, 싱글톤 빈으로 등록할 수 있음

### 어드바이스: 타깃이 필요 없는 순수한 부가기능
- MethodInterceptor는 부가기능을 타깃 오브젝트와 독립적으로 구현할 수 있는 인터페이스
  - InvocationHandler와 달리 타깃 오브젝트의 정보를 가지지 않기 때문에, 재사용이 용이하고 독립적인 부가기능을 제공할 수 있음
  - MethodInterceptor는 메소드 호출을 가로채서, 부가기능을 적용한 후 원래 메소드 호출을 진행

### 포인트컷: 부가기능 적용 대상 메서드 선정 방법
- Pointcut은 특정 메서드에만 부가기능을 적용할 수 있도록 메서드 선정 알고리즘을 제공
  - 메서드 이름이나 메서드의 시그니처 등을 기준으로 부가기능을 적용할 메서드를 선택
  - ProxyFactoryBean과 함께 사용되어 메서드 단위로 세밀하게 부가기능을 적용할 수 있음

## 6.4.2 ProxyFactoryBean 적용
### TransactionAdvice
- 부가기능을 담당하는 어드바이스는 MethodInterceptor 인터페이스를 구현해 만듦
- TransactionAdvice는 트랜잭션 관리 로직을 담아, 타깃 메서드의 실행 전후에 트랜잭션을 시작하고 종료하는 기능을 수행
- 코드가 간결해지고 리플렉션을 통한 타깃 메서드 호출의 번거로움을 줄일 수 있음

### 스프링 XML 설정파일
- XML 설정 파일에서 어드바이스와 포인트컷을 정의하고 이를 ProxyFactoryBean에 등록하여 트랜잭션 관리 기능을 적용
- 설정을 통해 특정 메서드 이름에 대해 트랜잭션 관리 로직을 적용할 수 있음

### 어드바이스와 포인트컷 재사용
- ProxyFactoryBean은 스프링의 DI와 템플릿/콜백 패턴, 서비스 추상화 등의 기법이 모두 적용된 구조
- 여러 프록시가 공유할 수 있는 어드바이스와 포인트컷을 사용해, 공통 로직을 재사용 가능
- 메서드 선정이 필요한 경우, 이름 패턴이나 포인트컷 설정을 통해 세밀한 제어가 가능